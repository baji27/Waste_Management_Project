<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cleantech Waste Classifier</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.18.0/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet@2.1.0"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Roboto:wght@300;400;500&display=swap');
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f7fafc;
        }
        
        .hero-gradient {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .waste-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .classification-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        
        .classification-card:hover {
            border-left-color: #10b981;
        }
        
        .dropzone {
            border: 2px dashed #cbd5e0;
            background-color: #f8fafc;
        }
        
        .dropzone.active {
            border-color: #10b981;
            background-color: #f0fdf4;
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Header -->
    <header class="hero-gradient text-white">
        <div class="container mx-auto px-4 py-16">
            <div class="flex flex-col md:flex-row items-center">
                <div class="md:w-1/2 mb-8 md:mb-0">
                    <h1 class="text-4xl md:text-5xl font-bold mb-4 font-['Montserrat']">WasteWise</h1>
                    <h2 class="text-2xl md:text-3xl mb-6">Transform Waste Management with transfer learning</h2>
                    <p class="text-lg mb-8">Our transfer learning-powered platform helps businesses and municipalities optimize waste sorting, reduce contamination, and increase recycling rates.</p>
                    <button id="tryDemoBtn" class="bg-white text-green-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition">Try Live Demo</button>
                </div>
                <div class="md:w-1/2 flex justify-center">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/b0f1e74a-8d99-414c-8679-004ddc7cd8cd.png" alt="Smart waste management system wis a modern recycling facility" class="rounded-lg shadow-xl" />
                </div>
            </div>
        </div>
    </header>
      
    <!-- How It Works Section -->
    <section class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12 font-['Montserrat']">How Our Waste Classifier project Works</h2>
            
            <div class="grid md:grid-cols-3 gap-8">
                <div class="bg-gray-50 p-6 rounded-lg">
                    <div class="text-green-600 text-4xl mb-4">1</div>
                    <h3 class="text-xl font-semibold mb-3">Upload Waste Image</h3>
                    <p>Capture or upload photos of waste items using our mobile-friendly interface.</p>
                </div>
                
                <div class="bg-gray-50 p-6 rounded-lg">
                    <div class="text-green-600 text-4xl mb-4">2</div>
                    <h3 class="text-xl font-semibold mb-3">project Analysis</h3>
                    <p>Our transfer learning model processes the image to identify waste composition and classify material type.</p>
                </div>
                
                <div class="bg-gray-50 p-6 rounded-lg">
                    <div class="text-green-600 text-4xl mb-4">3</div>
                    <h3 class="text-xl font-semibold mb-3">Smart Recommendations</h3>
                    <p>Receive disposal instructions tailored to local regulations and recycling facilities.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Classification Demo Section -->
    <section class="py-16 bg-gray-50" id="demoSection">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12 font-['Montserrat']">Waste Classification Demo</h2>
            
            <div class="flex flex-col md:flex-row gap-8 items-center">
                <div class="md:w-1/2">
                    <div id="dropzone" class="dropzone rounded-lg p-8 text-center cursor-pointer flex flex-col items-center justify-center h-64 mb-8">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                        </svg>
                        <p class="text-gray-500 mb-2">Drag & drop waste image here</p>
                        <p class="text-gray-400 text-sm">or click to select</p>
                        <input type="file" id="fileInput" class="hidden" accept="image/*" />
                    </div>
                    
                    <div class="bg-white rounded-lg shadow p-4 mb-8">
                        <img id="previewImage" class="hidden max-w-full h-auto rounded" />
                    </div>
                    
                    <div class="flex justify-center">
                        <button id="classifyBtn" class="bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            Classify Waste
                        </button>
                    </div>
                </div>
                
                <div class="md:w-1/2">
                    <div id="resultsContainer" class="hidden bg-white rounded-lg shadow p-6">
                        <h3 class="text-xl font-semibold mb-4">Classification Results</h3>
                        
                        <div id="classificationResults" class="space-y-4">
                            <!-- Results will be populated here -->
                        </div>
                        
                        <div id="disposalInfo" class="mt-6 pt-6 border-t border-gray-200 hidden">
                            <h4 class="font-semibold mb-2">Recommended Disposal Method</h4>
                            <p id="disposalMethod" class="text-gray-700"></p>
                            
                            <h4 class="font-semibold mt-4 mb-2">Environmental Impact</h4>
                            <div id="impactMeter" class="w-full bg-gray-200 rounded-full h-4 mb-4">
                                <div id="impactBar" class="h-4 rounded-full" style="width: 0%;"></div>
                            </div>
                            <p id="impactDescription" class="text-gray-700"></p>
                        </div>
                    </div>
                    
                    <div id="loadingSpinner" class="hidden text-center py-8">
                        <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-green-600 mb-4"></div>
                        <p>Analyzing waste composition...</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        // DOM Elements
        const dropzone = document.getElementById('dropzone');
        const fileInput = document.getElementById('fileInput');
        const previewImage = document.getElementById('previewImage');
        const classifyBtn = document.getElementById('classifyBtn');
        const resultsContainer = document.getElementById('resultsContainer');
        const classificationResults = document.getElementById('classificationResults');
        const loadingSpinner = document.getElementById('loadingSpinner');
        const tryDemoBtn = document.getElementById('tryDemoBtn');
        const disposalInfo = document.getElementById('disposalInfo');
        const disposalMethod = document.getElementById('disposalMethod');
        const impactBar = document.getElementById('impactBar');
        const impactDescription = document.getElementById('impactDescription');
        
        // Model variables
        let model = null;
        let isModelReady = false;
        
        // Sample disposal recommendations (would normally come from API)
        const disposalMethods = {
            'plastic': 'Place in designated recycling bin. Rinse containers first.',
            'metal': 'Clean and place in metal recycling. Aluminum foil should be clean and balled up.',
            'paper': 'Separate by grade. Remove any plastic windows from envelopes.',
            'organic': 'Compost in designated bin. No meat or dairy in home compost.',
            'glass': 'Sort by color and recycle separately. Do not include broken glass.',
            'electronic': 'Take to e-waste recycling center. Never dispose in regular trash.',
            'hazardous': 'Special handling required. Contact local hazardous waste facility.'
        };
        
        // Initialize the app
        async function initApp() {
            try {
                // Load the MobileNet model
                console.log('Loading model...');
                model = await mobilenet.load();
                isModelReady = true;
                console.log('Model loaded successfully');
                
                // Set up event listeners
                setupEventListeners();
            } catch (error) {
                console.error('Model loading error:', error);
            }
        }
        
        // Set up event listeners
        function setupEventListeners() {
            // Dropzone click event
            dropzone.addEventListener('click', () => fileInput.click());
            
            // File input change event
            fileInput.addEventListener('change', handleFileSelect);
            
            // Drag and drop events
            dropzone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropzone.classList.add('active');
            });
            
            dropzone.addEventListener('dragleave', () => {
                dropzone.classList.remove('active');
            });
            
            dropzone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropzone.classList.remove('active');
                
                if (e.dataTransfer.files.length) {
                    const file = e.dataTransfer.files[0];
                    handleFileSelect({ target: { files: [file] } });
                }
            });
            
            // Classify button
            classifyBtn.addEventListener('click', classifyImage);
            
            // Try demo button
            tryDemoBtn.addEventListener('click', () => {
                document.getElementById('demoSection').scrollIntoView({ behavior: 'smooth' });
            });
        }
        
        // Handle file selection
        function handleFileSelect(event) {
            const file = event.target.files[0];
            
            if (file && file.type.match('image.*')) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    previewImage.src = e.target.result;
                    previewImage.classList.remove('hidden');
                    
                    // Enable classify button if model is ready
                    if (isModelReady) {
                        classifyBtn.disabled = false;
                    }
                    
                    // Clear previous results
                    classificationResults.innerHTML = '';
                    disposalInfo.classList.add('hidden');
                    resultsContainer.classList.add('hidden');
                };
                
                reader.readAsDataURL(file);
            }
        }
        
        // Classify image using MobileNet
        async function classifyImage() {
            if (!previewImage.src || !isModelReady) return;
            
            try {
                // Show loading spinner
                loadingSpinner.classList.remove('hidden');
                resultsContainer.classList.add('hidden');
                
                // Classify the image
                const predictions = await model.classify(previewImage);
                
                // Map to waste-specific categories (simplified for demo)
                const wasteCategories = mapToWasteCategories(predictions);
                
                // Display results
                displayResults(wasteCategories);
                
                // Show appropriate disposal method (simulated)
                showDisposalInfo(wasteCategories[0].category);
                
            } catch (error) {
                console.error('Classification error:', error);
                classificationResults.innerHTML = `
                    <div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4">
                        <p>Error classifying image: ${error.message}</p>
                    </div>
                `;
            } finally {
                loadingSpinner.classList.add('hidden');
                resultsContainer.classList.remove('hidden');
            }
        }
        
        // Map general ImageNet predictions to waste-specific categories
        function mapToWasteCategories(predictions) {
            // This is a simplified mapping for demo purposes
            // In a real app, you would have a more sophisticated mapping or custom model
            
            const wasteMapping = {
                'bottle': { category: 'plastic', confidence: 0.9 },
                'can': { category: 'metal', confidence: 0.85 },
                'newspaper': { category: 'paper', confidence: 0.8 },
                'banana': { category: 'organic', confidence: 0.95 },
                'jar': { category: 'glass', confidence: 0.88 },
                'computer': { category: 'electronic', confidence: 0.92 },
                'battery': { category: 'hazardous', confidence: 0.97 }
            };
            
            // Find the best matching waste category for each prediction
            return predictions.map(pred => {
                const className = pred.className.toLowerCase();
                let bestMatch = null;
                
                // Check for direct matches first
                for (const [key, value] of Object.entries(wasteMapping)) {
                    if (className.includes(key)) {
                        bestMatch = { ...value };
                        break;
                    }
                }
                
                // If no direct match, use generic waste classification
                if (!bestMatch) {
                    bestMatch = {
                        category: classifyGeneralWaste(className),
                        confidence: pred.probability
                    };
                }
                
                return {
                    className: pred.className,
                    probability: pred.probability,
                    category: bestMatch.category,
                    confidence: bestMatch.confidence
                };
            });
        }
        
        // Classify general waste types based on keywords
        function classifyGeneralWaste(className) {
            const plasticKeywords = ['plastic', 'bottle', 'bag', 'container'];
            const metalKeywords = ['can', 'metal', 'aluminum', 'steel'];
            const paperKeywords = ['paper', 'cardboard', 'newspaper', 'envelope'];
            const organicKeywords = ['food', 'fruit', 'vegetable', 'banana', 'apple'];
            const glassKeywords = ['glass', 'jar', 'bottle'];
            const electronicKeywords = ['electronic', 'computer', 'phone', 'device'];
            const hazardousKeywords = ['battery', 'chemical', 'hazardous', 'toxic'];
            
            if (plasticKeywords.some(kw => className.includes(kw))) return 'plastic';
            if (metalKeywords.some(kw => className.includes(kw))) return 'metal';
            if (paperKeywords.some(kw => className.includes(kw))) return 'paper';
            if (organicKeywords.some(kw => className.includes(kw))) return 'organic';
            if (glassKeywords.some(kw => className.includes(kw))) return 'glass';
            if (electronicKeywords.some(kw => className.includes(kw))) return 'electronic';
            if (hazardousKeywords.some(kw => className.includes(kw))) return 'hazardous';
            
            // Default to general waste if no specific category matched
            return 'general';
        }
        
        // Display classification results
        function displayResults(predictions) {
            classificationResults.innerHTML = '';
            
            // Display top 3 predictions
            predictions.slice(0, 3).forEach((pred, index) => {
                const confidencePercent = Math.round(pred.probability * 100);
                
                const resultElement = document.createElement('div');
                resultElement.className = 'classification-card bg-gray-50 p-4 rounded';
                resultElement.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-semibold">${pred.className}</span>
                        <span class="text-gray-600">${confidencePercent}%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div class="bg-green-600 h-2.5 rounded-full" style="width: ${confidencePercent}%"></div>
                    </div>
                    <div class="mt-2 flex items-center">
                        <span class="inline-block px-2 py-1 text-xs rounded-full bg-${getCategoryColor(
                            pred.category
                        )}-100 text-${getCategoryColor(pred.category)}-800">
                            ${pred.category.toUpperCase()}
                        </span>
                    </div>
                `;
                
                classificationResults.appendChild(resultElement);
            });
        }
        
        // Get color based on waste category
        function getCategoryColor(category) {
            const colorMap = {
                'plastic': 'blue',
                'metal': 'indigo',
                'paper': 'yellow',
                'organic': 'green',
                'glass': 'orange',
                'electronic': 'purple',
                'hazardous': 'red',
                'general': 'gray'
            };
            
            return colorMap[category] || 'gray';
        }
        
        // Show disposal information based on waste category
        function showDisposalInfo(category) {
            disposalMethod.textContent = disposalMethods[category] || 'Place in general waste bin. Check local guidelines for specific disposal requirements.';
            
            // Set environmental impact (simplified for demo)
            let impactPercent = 70;
            let impactText = '';
            
            switch(category) {
                case 'plastic':
                case 'metal':
                case 'paper':
                case 'glass':
                    impactPercent = 90;
                    impactText = 'Highly recyclable - Proper disposal reduces landfill waste significantly.';
                    break;
                case 'organic':
                    impactPercent = 80;
                    impactText = 'Compostable - Reduces methane emissions from landfills.';
                    break;
                case 'electronic':
                    impactPercent = 85;
                    impactText = 'Valuable materials recoverable - Prevents hazardous substance leakage.';
                    break;
                case 'hazardous':
                    impactPercent = 95;
                    impactText = 'Critical to dispose properly - Prevents environmental contamination.';
                    break;
                default:
                    impactPercent = 30;
                    impactText = 'Minimal recovery potential - Consider reducing consumption.';
            }
            
            // Animate impact bar
            setTimeout(() => {
                impactBar.style.width = impactPercent + '%';
                impactBar.className = `h-4 rounded-full ${getImpactBarColor(impactPercent)}`;
                impactDescription.textContent = impactText;
                disposalInfo.classList.remove('hidden');
            }, 300);
        }
        
        // Get color for impact bar
        function getImpactBarColor(percent) {
            if (percent > 80) return 'bg-green-600';
            if (percent > 60) return 'bg-green-500';
            if (percent > 40) return 'bg-yellow-500';
            return 'bg-red-500';
        }
        
        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>

        
    <!-- Waste Categories Section -->
    <section class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12 font-['Montserrat']">Supported Waste Categories</h2>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                <div class="waste-card bg-white rounded-lg shadow-md overflow-hidden transition duration-300">
                    <div class="h-48 bg-gray-100 flex items-center justify-center">
                        <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/a0b13d82-a99e-4e9e-9c55-0cc2c505b82d.png" alt="Various plastic bottles and containers sorted into recycling bins" class="w-full h-full object-cover" />
                    </div>
                    <div class="p-4">
                        <h3 class="font-semibold text-lg mb-2">Plastics</h3>
                        <p class="text-gray-600">PET, HDPE, PVC and other polymer types</p>
                    </div>
                </div>
                
                <div class="waste-card bg-white rounded-lg shadow-md overflow-hidden transition duration-300">
                    <div class="h-48 bg-gray-100 flex items-center justify-center">
                        <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/b3952a53-867b-4186-b225-9fa500ca3b6b.png" alt="Crushed aluminum cans and other metal scrap materials ready for recycling" class="w-full h-full object-cover" />
                    </div>
                    <div class="p-4">
                        <h3 class="font-semibold text-lg mb-2">Metals</h3>
                        <p class="text-gray-600">Aluminum, steel, copper and other alloys</p>
                    </div>
                </div>
                
                <div class="waste-card bg-white rounded-lg shadow-md overflow-hidden transition duration-300">
                    <div class="h-48 bg-gray-100 flex items-center justify-center">
                        <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/199ed025-14b6-4cc4-8d51-83c463982029.png" alt="Sorted paper and cardboard stacks awaiting recycling process" class="w-full h-full object-cover" />
                    </div>
                    <div class="p-4">
                        <h3 class="font-semibold text-lg mb-2">Paper & Cardboard</h3>
                        <p class="text-gray-600">Newsprint, office paper, corrugated cardboard</p>
                    </div>
                </div>
                
                <div class="waste-card bg-white rounded-lg shadow-md overflow-hidden transition duration-300">
                    <div class="h-48 bg-gray-100 flex items-center justify-center">
                        <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/0f45c6ee-ef0a-4833-9d9c-b32fee391d44.png" alt="Assorted organic waste including fruit peels, vegetables and other compostable materials" class="w-full h-full object-cover" />
                    </div>
                    <div class="p-4">
                        <h3 class="font-semibold text-lg mb-2">Organic Waste</h3>
                        <p class="text-gray-600">Food scraps, yard trimmings, compostables</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Transfer Learning Explanation -->
    <section class="py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row items-center gap-8">
                <div class="md:w-1/2 mb-8 md:mb-0">
                    <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/3cecb9c3-23cd-42e1-9d9f-a5e4cfdd73f1.png" alt="Visualization of transfer learning process showing pre-trained model adapting to waste classification task" class="rounded-lg shadow-lg" />
                </div>
                <div class="md:w-1/2">
                    <h2 class="text-3xl font-bold mb-6 font-['Montserrat']">Powered by Transfer Learning</h2>
                    <p class="mb-4 text-lg">Our waste classifier leverages transfer learning to adapt powerful pre-trained models like MobileNet for specialized waste recognition tasks.</p>
                    <p class="mb-4">This approach significantly reduces the amount of training data required while maintaining high accuracy, allowing us to continuously improve our model as we encounter new waste streams.</p>
                    <p>The model has been fine-tuned on thousands of waste item images across different lighting conditions, angles, and states of decomposition.</p>
                </div>
            </div>
        </div>
    </section>

    <script>
        // DOM Elements
        const dropzone = document.getElementById('dropzone');
        const fileInput = document.getElementById('fileInput');
        const previewImage = document.getElementById('previewImage');
        const classifyBtn = document.getElementById('classifyBtn');
        const resultsContainer = document.getElementById('resultsContainer');
        const classificationResults = document.getElementById('classificationResults');
        const loadingSpinner = document.getElementById('loadingSpinner');
        const tryDemoBtn = document.getElementById('tryDemoBtn');
        const disposalInfo = document.getElementById('disposalInfo');
        const disposalMethod = document.getElementById('disposalMethod');
        const impactBar = document.getElementById('impactBar');
        const impactDescription = document.getElementById('impactDescription');
        
        // Model variables
        let model = null;
        let isModelReady = false;
        
        // Sample disposal recommendations (would normally come from API)
        const disposalMethods = {
            'plastic': 'Place in designated recycling bin. Rinse containers first.',
            'metal': 'Clean and place in metal recycling. Aluminum foil should be clean and balled up.',
            'paper': 'Separate by grade. Remove any plastic windows from envelopes.',
            'organic': 'Compost in designated bin. No meat or dairy in home compost.',
            'glass': 'Sort by color and recycle separately. Do not include broken glass.',
            'electronic': 'Take to e-waste recycling center. Never dispose in regular trash.',
            'hazardous': 'Special handling required. Contact local hazardous waste facility.'
        };
        
        // Initialize the app
        async function initApp() {
            try {
                // Load the MobileNet model
                console.log('Loading model...');
                model = await mobilenet.load();
                isModelReady = true;
                console.log('Model loaded successfully');
                
                // Set up event listeners
                setupEventListeners();
            } catch (error) {
                console.error('Model loading error:', error);
            }
        }
        
        // Set up event listeners
        function setupEventListeners() {
            // Dropzone click event
            dropzone.addEventListener('click', () => fileInput.click());
            
            // File input change event
            fileInput.addEventListener('change', handleFileSelect);
            
            // Drag and drop events
            dropzone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropzone.classList.add('active');
            });
            
            dropzone.addEventListener('dragleave', () => {
                dropzone.classList.remove('active');
            });
            
            dropzone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropzone.classList.remove('active');
                
                if (e.dataTransfer.files.length) {
                    const file = e.dataTransfer.files[0];
                    handleFileSelect({ target: { files: [file] } });
                }
            });
            
            // Classify button
            classifyBtn.addEventListener('click', classifyImage);
            
            // Try demo button
            tryDemoBtn.addEventListener('click', () => {
                document.getElementById('demoSection').scrollIntoView({ behavior: 'smooth' });
            });
        }
        
        // Handle file selection
        function handleFileSelect(event) {
            const file = event.target.files[0];
            
            if (file && file.type.match('image.*')) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    previewImage.src = e.target.result;
                    previewImage.classList.remove('hidden');
                    
                    // Enable classify button if model is ready
                    if (isModelReady) {
                        classifyBtn.disabled = false;
                    }
                    
                    // Clear previous results
                    classificationResults.innerHTML = '';
                    disposalInfo.classList.add('hidden');
                    resultsContainer.classList.add('hidden');
                };
                
                reader.readAsDataURL(file);
            }
        }
        
        // Classify image using MobileNet
        async function classifyImage() {
            if (!previewImage.src || !isModelReady) return;
            
            try {
                // Show loading spinner
                loadingSpinner.classList.remove('hidden');
                resultsContainer.classList.add('hidden');
                
                // Classify the image
                const predictions = await model.classify(previewImage);
                
                // Map to waste-specific categories (simplified for demo)
                const wasteCategories = mapToWasteCategories(predictions);
                
                // Display results
                displayResults(wasteCategories);
                
                // Show appropriate disposal method (simulated)
                showDisposalInfo(wasteCategories[0].category);
                
            } catch (error) {
                console.error('Classification error:', error);
                classificationResults.innerHTML = `
                    <div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4">
                        <p>Error classifying image: ${error.message}</p>
                    </div>
                `;
            } finally {
                loadingSpinner.classList.add('hidden');
                resultsContainer.classList.remove('hidden');
            }
        }
        
        // Map general ImageNet predictions to waste-specific categories
        function mapToWasteCategories(predictions) {
            // This is a simplified mapping for demo purposes
            // In a real app, you would have a more sophisticated mapping or custom model
            
            const wasteMapping = {
                'bottle': { category: 'plastic', confidence: 0.9 },
                'can': { category: 'metal', confidence: 0.85 },
                'newspaper': { category: 'paper', confidence: 0.8 },
                'banana': { category: 'organic', confidence: 0.95 },
                'jar': { category: 'glass', confidence: 0.88 },
                'computer': { category: 'electronic', confidence: 0.92 },
                'battery': { category: 'hazardous', confidence: 0.97 }
            };
            
            // Find the best matching waste category for each prediction
            return predictions.map(pred => {
                const className = pred.className.toLowerCase();
                let bestMatch = null;
                
                // Check for direct matches first
                for (const [key, value] of Object.entries(wasteMapping)) {
                    if (className.includes(key)) {
                        bestMatch = { ...value };
                        break;
                    }
                }
                
                // If no direct match, use generic waste classification
                if (!bestMatch) {
                    bestMatch = {
                        category: classifyGeneralWaste(className),
                        confidence: pred.probability
                    };
                }
                
                return {
                    className: pred.className,
                    probability: pred.probability,
                    category: bestMatch.category,
                    confidence: bestMatch.confidence
                };
            });
        }
        
        // Classify general waste types based on keywords
        function classifyGeneralWaste(className) {
            const plasticKeywords = ['plastic', 'bottle', 'bag', 'container'];
            const metalKeywords = ['can', 'metal', 'aluminum', 'steel'];
            const paperKeywords = ['paper', 'cardboard', 'newspaper', 'envelope'];
            const organicKeywords = ['food', 'fruit', 'vegetable', 'banana', 'apple'];
            const glassKeywords = ['glass', 'jar', 'bottle'];
            const electronicKeywords = ['electronic', 'computer', 'phone', 'device'];
            const hazardousKeywords = ['battery', 'chemical', 'hazardous', 'toxic'];
            
            if (plasticKeywords.some(kw => className.includes(kw))) return 'plastic';
            if (metalKeywords.some(kw => className.includes(kw))) return 'metal';
            if (paperKeywords.some(kw => className.includes(kw))) return 'paper';
            if (organicKeywords.some(kw => className.includes(kw))) return 'organic';
            if (glassKeywords.some(kw => className.includes(kw))) return 'glass';
            if (electronicKeywords.some(kw => className.includes(kw))) return 'electronic';
            if (hazardousKeywords.some(kw => className.includes(kw))) return 'hazardous';
            
            // Default to general waste if no specific category matched
            return 'general';
        }
        
        // Display classification results
        function displayResults(predictions) {
            classificationResults.innerHTML = '';
            
            // Display top 3 predictions
            predictions.slice(0, 3).forEach((pred, index) => {
                const confidencePercent = Math.round(pred.probability * 100);
                
                const resultElement = document.createElement('div');
                resultElement.className = 'classification-card bg-gray-50 p-4 rounded';
                resultElement.innerHTML = `
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-semibold">${pred.className}</span>
                        <span class="text-gray-600">${confidencePercent}%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div class="bg-green-600 h-2.5 rounded-full" style="width: ${confidencePercent}%"></div>
                    </div>
                    <div class="mt-2 flex items-center">
                        <span class="inline-block px-2 py-1 text-xs rounded-full bg-${getCategoryColor(
                            pred.category
                        )}-100 text-${getCategoryColor(pred.category)}-800">
                            ${pred.category.toUpperCase()}
                        </span>
                    </div>
                `;
                
                classificationResults.appendChild(resultElement);
            });
        }
        
        // Get color based on waste category
        function getCategoryColor(category) {
            const colorMap = {
                'plastic': 'blue',
                'metal': 'indigo',
                'paper': 'yellow',
                'organic': 'green',
                'glass': 'orange',
                'electronic': 'purple',
                'hazardous': 'red',
                'general': 'gray'
            };
            
            return colorMap[category] || 'gray';
        }
        
        // Show disposal information based on waste category
        function showDisposalInfo(category) {
            disposalMethod.textContent = disposalMethods[category] || 'Place in general waste bin. Check local guidelines for specific disposal requirements.';
            
            // Set environmental impact (simplified for demo)
            let impactPercent = 70;
            let impactText = '';
            
            switch(category) {
                case 'plastic':
                case 'metal':
                case 'paper':
                case 'glass':
                    impactPercent = 90;
                    impactText = 'Highly recyclable - Proper disposal reduces landfill waste significantly.';
                    break;
                case 'organic':
                    impactPercent = 80;
                    impactText = 'Compostable - Reduces methane emissions from landfills.';
                    break;
                case 'electronic':
                    impactPercent = 85;
                    impactText = 'Valuable materials recoverable - Prevents hazardous substance leakage.';
                    break;
                case 'hazardous':
                    impactPercent = 95;
                    impactText = 'Critical to dispose properly - Prevents environmental contamination.';
                    break;
                default:
                    impactPercent = 30;
                    impactText = 'Minimal recovery potential - Consider reducing consumption.';
            }
            
            // Animate impact bar
            setTimeout(() => {
                impactBar.style.width = impactPercent + '%';
                impactBar.className = `h-4 rounded-full ${getImpactBarColor(impactPercent)}`;
                impactDescription.textContent = impactText;
                disposalInfo.classList.remove('hidden');
            }, 300);
        }
        
        // Get color for impact bar
        function getImpactBarColor(percent) {
            if (percent > 80) return 'bg-green-600';
            if (percent > 60) return 'bg-green-500';
            if (percent > 40) return 'bg-yellow-500';
            return 'bg-red-500';
        }
        
        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>